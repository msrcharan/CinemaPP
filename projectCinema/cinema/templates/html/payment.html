{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cinema++</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;800&display=swap" />
    <link rel="stylesheet" href="{% static 'css/index.css' %}" />
    <link rel="stylesheet" href="{% static 'css/index 2.css' %}" type="text/css" />
    <link rel="stylesheet" href="{% static 'css/indi_movie.css' %}" type="text/css" />
    <link rel="stylesheet" href="{% static 'css/payment.css' %}" type="text/css" />
    <link rel="stylesheet" href="{% static 'css/booking.css' %}" type="text/css" />
    <link rel="stylesheet" href="{% static 'css/editprofile.css' %}" type="text/css" />
    <script src="{% static 'js/payment.js' %}"></script>
  </head>
  <body data-user-logged-in="{{ request.user.is_authenticated|yesno:'true,false' }}" data-user-name="{% if user.is_authenticated %}{{ user.get_username }}{% endif %}">
    <div class="main-container" style="padding:20px;">
      <script src="{% static 'js/common.js' %}" async></script>
      <div class="rect">
        <h1 class="headings" style="margin:3% 0 6% 0;"> Total: ${{total_price}} </h1>
        <div class="form-container" id="edit-payment-form" style="margin-top:6%;">
        <form id="myform-success" action="{% url 'success' %}" method="POST">
          {% csrf_token %}
          <label class="headings">Payment Info</label>
          <select id="cardSelector" onchange="displayCard()">
            <option value="">Select a Card</option>
            <option value="Card 1">Card 1</option>
            <option value="Card 2">Card 2</option>
            <option value="Card 3">Card 3</option>'
            <option value="New Card">Use Another Card</option>
        </select>
        <div class="form-container" id="cardDetails1" style="display:none;">
          <label for="id_credit_card_type">Card Type</label>
          <input type="text" id="id_credit_card_type" name="credit_card_type" value="{% if user.credit_card_type %}{{ user.credit_card_type }}{% endif %}">
          <label for="id_credit_card_name">First and Last Name</label>
          <input type="text" id="id_credit_card_name" name="credit_card_name" value="{% if user.credit_card_name %}{{ user.credit_card_name }}{% endif %}">
          <label for="id_credit_card_number">Credit Card Number</label>
          <input type="text" id="id_credit_card_number" name="credit_card_number" value="{% if user.credit_card_number %}{{ user.credit_card_number }}{% endif %}">
          <label for="id_credit_card_cvv">CVV</label>
          <input type="text" id="id_credit_card_cvv" name="credit_card_cvv" value="{% if user.credit_card_cvv %}{{ user.credit_card_cvv }}{% endif %}">
          <label for="id_credit_card_expiry">Expiration Date</label>
          <input type="date" id="id_credit_card_expiry" name="credit_card_expiry" value="{% if user.credit_card_expiry %}{{ user.credit_card_expiry }}{% endif %}">
          <label for="id_credit_card_address">Billing Address</label>
          <input type="text" id="id_credit_card_address" name="credit_card_address" value="{% if user.credit_card_address %}{{ user.credit_card_address }}{% endif %}">
          <label for="id_credit_card_city">City</label>
          <input type="text" id="id_credit_card_city" name="credit_card_city" value="{% if user.credit_card_city %}{{ user.credit_card_city }}{% endif %}">
          <label for="id_credit_card_state">State</label>
          <input type="text" id="id_credit_card_state" name="credit_card_state" value="{% if user.credit_card_state %}{{ user.credit_card_state }}{% endif %}">
          <label for="id_credit_card_zip">ZIP Code</label>
          <input type="text" id="id_credit_card_zip" name="credit_card_zip" value="{% if user.credit_card_zip %}{{ user.credit_card_zip }}{% endif %}">
            <button type="submit" class="payment" id="payment">Pay Now</button>
        </div>
        <div class="form-container" id="cardDetails2" style="display:none;">
          <label for="id_credit_card_type">Card Type</label>
          <input type="text" id="id_credit_card_type" name="credit_card_type" value="{% if user.credit_card_type_2 %}{{ user.credit_card_type_2 }}{% endif %}">
          <label for="id_credit_card_name">First and Last Name</label>
          <input type="text" id="id_credit_card_name" name="credit_card_name" value="{% if user.credit_card_name_2 %}{{ user.credit_card_name_2 }}{% endif %}">
          <label for="id_credit_card_number">Credit Card Number</label>
          <input type="text" id="id_credit_card_number" name="credit_card_number" value="{% if user.credit_card_numbe_2 %}{{ user.credit_card_number_2 }}{% endif %}">
          <label for="id_credit_card_cvv">CVV</label>
          <input type="text" id="id_credit_card_cvv" name="credit_card_cvv" value="{% if user.credit_card_cvv_2 %}{{ user.credit_card_cvv_2 }}{% endif %}">
          <label for="id_credit_card_expiry">Expiration Date</label>
          <input type="date" id="id_credit_card_expiry" name="credit_card_expiry" value="{% if user.credit_card_expiry_2 %}{{ user.credit_card_expiry_2 }}{% endif %}">
          <label for="id_credit_card_address">Billing Address</label>
          <input type="text" id="id_credit_card_address" name="credit_card_address" value="{% if user.credit_card_address_2 %}{{ user.credit_card_address_2 }}{% endif %}">
          <label for="id_credit_card_city">City</label>
          <input type="text" id="id_credit_card_city" name="credit_card_city" value="{% if user.credit_card_city_2 %}{{ user.credit_card_city_2 }}{% endif %}">
          <label for="id_credit_card_state">State</label>
          <input type="text" id="id_credit_card_state" name="credit_card_state" value="{% if user.credit_card_state_2 %}{{ user.credit_card_state_2 }}{% endif %}">
          <label for="id_credit_card_zip">ZIP Code</label>
          <input type="text" id="id_credit_card_zip" name="credit_card_zip" value="{% if user.credit_card_zip_2 %}{{ user.credit_card_zip_2 }}{% endif %}">
            <button type="submit" class="payment" id="payment">Pay Now</button>
        </div>
        <div class="form-container" id="cardDetails3" style="display:none;">
          <label for="id_credit_card_type">Card Type</label>
          <input type="text" id="id_credit_card_type" name="credit_card_type" value="{% if user.credit_card_type_3 %}{{ user.credit_card_type_3 }}{% endif %}">
          <label for="id_credit_card_name">First and Last Name</label>
          <input type="text" id="id_credit_card_name" name="credit_card_name" value="{% if user.credit_card_name_3 %}{{ user.credit_card_name_3 }}{% endif %}">
          <label for="id_credit_card_number">Credit Card Number</label>
          <input type="text" id="id_credit_card_number" name="credit_card_number" value="{% if user.credit_card_number_3 %}{{ user.credit_card_number_3 }}{% endif %}">
          <label for="id_credit_card_cvv">CVV</label>
          <input type="text" id="id_credit_card_cvv" name="credit_card_cvv" value="{% if user.credit_card_cvv_3 %}{{ user.credit_card_cvv_3 }}{% endif %}">
          <label for="id_credit_card_expiry">Expiration Date</label>
          <input type="date" id="id_credit_card_expiry" name="credit_card_expiry" value="{% if user.credit_card_expiry_3 %}{{ user.credit_card_expiry_3 }}{% endif %}">
          <label for="id_credit_card_address">Billing Address</label>
          <input type="text" id="id_credit_card_address" name="credit_card_address" value="{% if user.credit_card_address_3 %}{{ user.credit_card_address_3 }}{% endif %}">
          <label for="id_credit_card_city">City</label>
          <input type="text" id="id_credit_card_city" name="credit_card_city" value="{% if user.credit_card_city_3 %}{{ user.credit_card_city_3 }}{% endif %}">
          <label for="id_credit_card_state">State</label>
          <input type="text" id="id_credit_card_state" name="credit_card_state" value="{% if user.credit_card_state_3 %}{{ user.credit_card_state_3 }}{% endif %}">
          <label for="id_credit_card_zip">ZIP Code</label>
          <input type="text" id="id_credit_card_zip" name="credit_card_zip" value="{% if user.credit_card_zip_3 %}{{ user.credit_card_zip_3 }}{% endif %}">
          <button type="submit" class="payment" id="payment">Pay Now</button>
        </div>
          <div id="new-card" style="display:none;">
            <label for="id_credit_card_type">Card Type</label>
            <input type="text" id="id_credit_card_type" name="credit_card_type">
            <label for="id_credit_card_name">First and Last Name</label>
            <input type="text" id="id_credit_card_name" name="credit_card_name">
            <label for="id_credit_card_number">Credit Card Number</label>
            <input type="text" id="id_credit_card_number" name="credit_card_number">
            <label for="id_credit_card_cvv">CVV</label>
            <input type="text" id="id_credit_card_cvv" name="credit_card_cvv">
            <label for="id_credit_card_expiry">Expiration Date</label>
            <input type="date" id="id_credit_card_expiry" name="credit_card_expiry">
            <label for="id_credit_card_address">Billing Address</label>
            <input type="text" id="id_credit_card_address" name="credit_card_address">
            <label for="id_credit_card_city">City</label>
            <input type="text" id="id_credit_card_city" name="credit_card_city">
            <label for="id_credit_card_state">State</label>
            <input type="text" id="id_credit_card_state" name="credit_card_state">
            <label for="id_credit_card_zip">ZIP Code</label>
            <input type="text" id="id_credit_card_zip" name="credit_card_zip">
            <button type="submit" class="payment" id="payment">Pay Now</button>
          </div>
          <input type="hidden" name="movie_title" value="{{ movie_title }}">
          <input type="hidden" name="selected_date" value="{{ selected_date }}">
          <input type="hidden" name="mpaa_rating" value="{{ mpaa_rating }}">
          <input type="hidden" name="show_time" value="{{ show_time }}">
          <input type="hidden" name="ticket_quantity" value="{{ ticket_quantity }}">
          <input type="hidden" name="seats" value="{{ seats }}">
          <input type="hidden" name="total_price" value="{{ total_price }}">
          <input type="hidden" name="booking_fees" value="{{ booking_fees }}">
          <input type="hidden" name="tax" value="{{ tax }}">
          <input type="hidden" name="total_new_price" value="{{ total_new_price }}">
          <input type="hidden" name="screen_id" value="{{ screen_id }}">
          <input type="hidden" name="show_id" value="{{show_id}}">
          <input type="hidden" name="date" value="{{date}}">
          <input type="hidden" name="time" value="{{time}}">
          <!--<script>
            document.getElementById('myform').addEventListener('submit', function(event) {
              event.preventDefault(); // Prevent the default form submission
              if (this.checkValidity()) { // Check if all    fields are filled
                window.location.href = '/payment_success/'; // Redirect if form is valid
              } else {
                // Optional: Trigger validation messages
                this.reportValidity();
              }
            });
          </script>-->
        </form>
      </div>
    </div>
  </body>
</html>
